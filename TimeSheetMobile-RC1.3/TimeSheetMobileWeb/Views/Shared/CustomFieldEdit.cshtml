@using TimeSheetMobileWeb.Models
@using MVCControlsToolkit.Controls
@using MVCControlsToolkit.Core

@model CustomFieldsView
@{
   
    List<object> ltemplates = new List<object>();
    for(int i=0;i<Model.CustomFieldItems.Count;i++)
    {
    ltemplates.Add(_S.H<TimeSheetIBusiness.CustomFieldItem>(
                 @<text>
                 
                                    @item.HiddenFor(mbox => mbox.FullName)
                                    @item.HiddenFor(mbox => mbox.Name)

                            
                                       @*  @item.HiddenFor(m => (m.CustomFieldItems[i] as CustomFieldItem).FullName)
                                    @item.HiddenFor(m => (m.CustomFieldItems[i] as CustomFieldItem).Name)*@
                                            <span class="ui-bar-c lowEnf">@item.ValueFor(mbox=>mbox.FullName)</span>
                                   
                                     <input type='hidden' id='@item.PrefixedId(item.ValueFor(m => m.Name) + "_cf_ed")' 
                                     value='@item.DisplayFor(m => m.Value)' />
                                    <a href="#" id='@item.PrefixedId(@item.ValueFor(m=> m.Name)) + "_cf_ed_display")' 
                                    data-format="@item.ClientFormatting(m => m.Value)" class='datepicker detailTBCS'>@item.DisplayFor(m => m.Value)</a>
                                    @item.ValidationMessageFor(m => m.Value, "*")<br />
                                          <br />
                 </text>
));
}

    object[] templates = ltemplates.ToArray();
            
     @Html.SortableListFor(m=>m.CustomFieldItems,
        templates,
        canSort: false,
        allItemsContainer: ExternalContainerType.div,
        itemContainer: ExternalContainerType.div,
                                  htmlAttributesContainer: new RouteValueDictionary { { "data-rows-prefix", @Html.PrefixedId(m => m.CustomFieldItems) }, { "class", "innerRowsContainer" } },
                htmlAttributesItems: new RouteValueDictionary { { "class", "rowContainer" } }
        )
           
    }